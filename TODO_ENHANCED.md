# قائمة مهام مشروع MediSwitch المحسنة

هذه قائمة المهام المطلوبة لاستكمال تطوير تطبيق **MediSwitch** - المنصة الذكية الشاملة لإدارة الأدوية وتبديلها بذكاء. تم تقسيم المهام إلى مهام الواجهة الأمامية (Frontend) ومهام الخلفية (Backend) مع تحديد الأولويات والتبعيات بينها، مع تفصيل أكبر للمهام ذات الأولوية العالية وإضافة أفكار جديدة.

## المهام ذات الأولوية القصوى

### 1. استكمال تشفير قاعدة البيانات باستخدام SQLCipher (AES-256)

تم البدء بالفعل في تنفيذ تشفير قاعدة البيانات باستخدام SQLCipher، ولكن يلزم استكمال التنفيذ بشكل كامل:

- [x] إضافة مكتبة SQLCipher إلى المشروع (تم إنجازه)
- [x] تنفيذ آلية توليد وتخزين مفتاح التشفير بشكل آمن (تم إنجازه جزئيًا)
- [ ] **إصلاح مشكلة تهيئة SQLCipher في ملف database_service.dart** (خطأ في الأقواس المتداخلة)
- [ ] تحسين آلية تخزين مفتاح التشفير باستخدام flutter_secure_storage:
  - [ ] إضافة طبقة إضافية من التشفير للمفتاح نفسه
  - [ ] ربط المفتاح بمعرف الجهاز الفريد لمنع نقل قاعدة البيانات بين الأجهزة
  - [ ] تنفيذ آلية استعادة المفتاح في حالة فقدانه
- [ ] تنفيذ اختبارات أداء لقياس تأثير التشفير على سرعة الاستعلامات
- [ ] تنفيذ آلية للتحقق من سلامة قاعدة البيانات عند فتحها
- [ ] إضافة خيار في الإعدادات لتغيير كلمة المرور/المفتاح (اختياري للمستخدمين المتقدمين)

### 2. تطوير نظام تحديث البيانات من ملفات Excel/CSV

- [x] تنفيذ نظام استيراد البيانات الأساسي من ملف CSV (تم إنجازه)
- [ ] **تحسين خدمة excel_import_service.dart**:
  - [ ] إضافة دعم لتنسيقات Excel المختلفة (.xlsx, .xls)
  - [ ] تنفيذ آلية التعرف التلقائي على أعمدة الملف حتى لو اختلف ترتيبها
  - [ ] إضافة دعم للترميز العربي (UTF-8) لضمان استيراد النصوص العربية بشكل صحيح
  - [ ] تنفيذ آلية للتعامل مع الخلايا الفارغة أو القيم غير الصالحة
- [ ] تطوير واجهة مستخدم لاستيراد البيانات:
  - [ ] إضافة شاشة لاختيار ملف Excel/CSV من الجهاز
  - [ ] عرض معاينة للبيانات قبل الاستيراد
  - [ ] إظهار تقدم عملية الاستيراد
  - [ ] عرض تقرير بنتائج الاستيراد (عدد السجلات المضافة/المحدثة/المرفوضة)
- [ ] تنفيذ آلية تحديث البيانات عن بُعد:
  - [ ] إنشاء خدمة سحابية بسيطة لاستضافة ملفات التحديث
  - [ ] تنفيذ آلية للتحقق من وجود تحديثات جديدة
  - [ ] تنزيل وتطبيق التحديثات تلقائيًا أو بناءً على طلب المستخدم
  - [ ] إضافة جدولة للتحقق من التحديثات (يوميًا/أسبوعيًا/شهريًا)
- [ ] تحسين أمان عملية التحديث:
  - [ ] التحقق من توقيع الملف للتأكد من مصدره
  - [ ] تشفير ملفات التحديث أثناء النقل
  - [ ] إنشاء نسخة احتياطية قبل تطبيق التحديث

### 3. تحسين نظام النسخ الاحتياطي واستعادة البيانات

- [x] تنفيذ آلية إنشاء نسخة احتياطية أساسية (تم إنجازه)
- [ ] **تحسين خدمة backup_service.dart**:
  - [ ] تشفير النسخ الاحتياطية باستخدام كلمة مرور المستخدم
  - [ ] ضغط النسخ الاحتياطية لتقليل حجمها
  - [ ] إضافة بيانات تعريفية للنسخة الاحتياطية (الإصدار، تاريخ الإنشاء، عدد السجلات)
  - [ ] تنفيذ آلية للتحقق من سلامة النسخة الاحتياطية قبل الاستعادة
- [ ] تطوير واجهة مستخدم للنسخ الاحتياطي والاستعادة:
  - [ ] إضافة شاشة لإدارة النسخ الاحتياطية
  - [ ] عرض قائمة بالنسخ الاحتياطية المتاحة مع تفاصيلها
  - [ ] إمكانية مشاركة النسخ الاحتياطية عبر البريد الإلكتروني أو التخزين السحابي
  - [ ] إمكانية جدولة النسخ الاحتياطي التلقائي (يوميًا/أسبوعيًا)
- [ ] دعم التخزين السحابي للنسخ الاحتياطية:
  - [ ] إضافة دعم لخدمات Google Drive و Dropbox
  - [ ] مزامنة النسخ الاحتياطية تلقائيًا مع الخدمات السحابية
  - [ ] استعادة البيانات من النسخ الاحتياطية السحابية

### 4. تحسين نظام تسجيل الأحداث (Logging)

- [x] تنفيذ نظام تسجيل الأحداث الأساسي (تم إنجازه)
- [ ] **تحسين خدمة logging_service.dart**:
  - [ ] تنظيم السجلات حسب النوع والخطورة
  - [ ] تدوير ملفات السجل عند وصولها لحجم معين
  - [ ] تشفير معلومات السجل الحساسة
  - [ ] إضافة معلومات سياق أكثر للأحداث (معرف المستخدم، إصدار التطبيق، نوع الجهاز)
- [ ] إضافة واجهة مستخدم لعرض السجلات (للمطورين فقط):
  - [ ] عرض السجلات مع إمكانية التصفية حسب النوع والتاريخ
  - [ ] إمكانية تصدير السجلات لتحليلها
  - [ ] إمكانية مسح السجلات القديمة
- [ ] إضافة نظام الإبلاغ عن الأخطاء:
  - [ ] إرسال تقارير الأخطاء تلقائيًا إلى خدمة تتبع الأخطاء
  - [ ] إضافة معلومات سياق للأخطاء (تتبع المكدس، حالة التطبيق)
  - [ ] إمكانية إضافة ملاحظات المستخدم لتقارير الأخطاء

## أفكار جديدة لتطوير التطبيق

### 1. نظام تنبيهات ذكي لتغيرات الأسعار

- [ ] تنفيذ آلية لتتبع تغيرات أسعار الأدوية:
  - [ ] مقارنة الأسعار الجديدة مع القديمة عند تحديث البيانات
  - [ ] تخزين تاريخ تغير السعر ونسبة التغيير
  - [ ] عرض رسم بياني لتغيرات السعر على مدار الوقت
- [ ] إضافة نظام تنبيهات للمستخدمين:
  - [ ] تنبيه المستخدم عند تغير سعر دواء في قائمة المفضلة
  - [ ] إمكانية تعيين حد أقصى للسعر لتلقي تنبيه عند انخفاض السعر عنه
  - [ ] تنبيهات بالأدوية البديلة الأرخص عند ارتفاع سعر دواء معين
- [ ] تقارير دورية عن تغيرات الأسعار:
  - [ ] تقرير أسبوعي/شهري بالأدوية التي تغيرت أسعارها
  - [ ] تحليل اتجاهات الأسعار حسب الفئة العلاجية
  - [ ] توقعات مستقبلية لتغيرات الأسعار بناءً على البيانات التاريخية

### 2. تحسين أداء البحث باستخدام تقنيات الفهرسة المتقدمة

- [ ] تنفيذ فهرسة نصية متقدمة:
  - [ ] استخدام تقنيات Full-Text Search لتحسين سرعة البحث
  - [ ] دعم البحث بالكلمات المفتاحية المتعددة
  - [ ] دعم البحث بالعبارات الدقيقة والبحث الضبابي
- [ ] تحسين خوارزمية البحث الذكي:
  - [ ] دعم تصحيح الأخطاء الإملائية تلقائيًا
  - [ ] دعم البحث بالمرادفات والمصطلحات الطبية المختلفة
  - [ ] ترتيب النتائج حسب الأهمية والملاءمة
- [ ] تحسين واجهة البحث:
  - [ ] إضافة اقتراحات البحث أثناء الكتابة
  - [ ] عرض نتائج البحث في مجموعات حسب الفئة العلاجية
  - [ ] إمكانية حفظ عمليات البحث السابقة والرجوع إليها

### 3. إضافة ميزات تحليلية للأطباء والصيادلة

- [ ] تنفيذ نظام تحليل التفاعلات الدوائية المتقدم:
  - [ ] تحليل التفاعلات بين أكثر من دواءين في نفس الوقت
  - [ ] تصنيف التفاعلات حسب الخطورة والتأثير
  - [ ] تقديم توصيات لتجنب التفاعلات الخطيرة
- [ ] إضافة أداة تحليل الوصفات الطبية:
  - [ ] إمكانية إدخال قائمة أدوية المريض
  - [ ] تحليل التفاعلات والتداخلات بين الأدوية
  - [ ] اقتراح بدائل أكثر أمانًا أو فعالية
- [ ] إضافة نظام دعم القرار الطبي:
  - [ ] تقديم معلومات عن الجرعات المناسبة حسب الحالة
  - [ ] تنبيهات عن موانع الاستعمال والآثار الجانبية
  - [ ] اقتراح بروتوكولات العلاج المناسبة

### 4. تحسين واجهة المستخدم لتشبه تطبيقات التواصل الاجتماعي

- [ ] تصميم واجهة مستخدم جذابة وسهلة الاستخدام:
  - [ ] استخدام بطاقات معلومات (Cards) لعرض الأدوية
  - [ ] إضافة حركات سحب (Swipe) للتنقل بين البد